{% extends 'webui/base.html' %}

{% block content %}
{% if user.harbor_auth_actual == user.HarborAuth.NEVER %}
  <p class="error">
    You are currently <u>NOT</u> authorized on the harbor.
    Please contact the station administration if you believe this in error.
  </p>
{% else %}
  <p>
    {% if user.harbor_auth_actual == user.HarborAuth.ALWAYS %}
      <em>Note: you are <strong class="green"><u>ALWAYS</u> authorized</strong> to broadcast on the harbor.</em>
    {% else %} {# user.HarborAuth.GOOGLE_CALENDAR #}
      You are only authorized to broadcast during your scheduled times.
      {% if user.google_calender_entry_grace_minutes > 0 or user.google_calender_exit_grace_minutes > 0 %}
        Your login grace period:
        <ul>
          {% if user.google_calender_entry_grace_minutes > 0 %}
            <li>You can <em>start</em> broadcasting up to
              <strong><u>{{ user.google_calender_entry_grace_minutes }} minute{{ user.google_calender_entry_grace_minutes|pluralize }}
                <em>before</em> your scheduled time</u></strong>.</li>
          {% endif %}
          {% if user.google_calender_exit_grace_minutes > 0 %}
            <li>You can <em>keep</em> broadcasting up to
                <strong><u>{{ user.google_calender_exit_grace_minutes }} minute{{ user.google_calender_exit_grace_minutes|pluralize }}
                  <em>after</em> your scheduled time</u></strong>.</li>
          {% endif %}
        </ul>
      {% endif %}
    {% endif %}
  </p>
{% endif %}

{% if user.upcoming_show_times %}
  {% if user.harbor_auth_actual == user.HarborAuth.NEVER %}
    <p class="orange">Below are your scheduled shows, however you will not be able to broadcast during
      them until you are authorized on the harbor.</p>
  {% endif %}

  <table>
    <caption>
      My Upcoming Scheduled Shows
      {% if user.harbor_auth_actual == user.HarborAuth.GOOGLE_CALENDAR %}
        {% if user.google_calender_entry_grace_minutes > 0 or user.google_calender_exit_grace_minutes > 0 %}
          <em>(Not Including Grace Period)</em>
        {% endif %}
      {% endif %}
    </caption>
    <thead>
      <tr>
        <th>#</th>
        <th>Start Time ({{ user.timezone }})</th>
        <th>End Time ({{ user.timezone }})</th>
      </tr>
    </thead>
    <tbody>
      {% for lower, upper in user.upcoming_show_times %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ lower }}</td>
          <td>{{ upper }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% elif user.harbor_auth_actual != user.HarborAuth.NEVER %}
  <p>No show times scheduled. Please contact the station administration if you believe this in error.</p>
{% endif %}
{% endblock %}

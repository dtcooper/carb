{% extends 'webui/base.html' %}

{% block content %}

<p>
  Below is a
    {% if perms.services.view_playoutlogentry %}simplified{% endif %}
  view of
  {% if object_list.count == MAX_ENTRIES %}
    {% if perms.services.view_playoutlogentry %}<em>only</em>{% endif %}
    the latest {{ MAX_ENTRIES }}
  {% else %}
    all {{ object_list.count }}
  {% endif %}
  playout log entr{{ object_list.count|pluralize:"y,ies" }}.
  Refresh this page to get the most up-to-date data.
  {% if perms.services.view_playoutlogentry %}
  <br>
  <em>
    (For a more advanced view, head over to the
    <strong><a href="{% url 'admin:services_playoutlogentry_changelist' %}">
      Station Admin Site</a></strong>.)
  </em>
  {% endif %}
</p>

<table>
  <caption>Playout Log</caption>
  <thead>
    <tr>
      <th>#</th>
      <th>Time</th>
      <th>Event Type</th>
      <th>Description</th>
      <th>Active Source</th>
  </thead>
  <tbody>
    {% for playout_log_entry in object_list %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ playout_log_entry.created|date:'SHORT_DATETIME_FORMAT' }}</td>
        <td>{{ playout_log_entry.get_event_type_display }}</td>
        <td>
          {% if perms.playout.view_audioasset and playout_log_entry.audio_asset_id %}
            <a href="{% url 'admin:autodj_audioasset_change' object_id=playout_log_entry.audio_asset_id %}">
          {% endif %}
          {{ playout_log_entry.description }}
          {% if playout_log_entry.audio_asset_id %}
            </a>
          {% endif %}
        </td>
        <td>{{ playout_log_entry.active_source }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
